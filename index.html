<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุฅุฏุงุฑุฉ ูุฒุฑุนุฉ ุงูุฃุบูุงู</title>

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>๐</text></svg>">

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">

    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>๐ ูุธุงู ุฅุฏุงุฑุฉ ูุฒุฑุนุฉ ุงูุฃุบูุงู</h1>
            <p>ูุธุงู ุดุงูู ูุชุชุจุน ูุฅุฏุงุฑุฉ ุงูุฃุบูุงู ูู ุงููุฒุฑุนุฉ</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="UI.showTab('dashboard', event)">ููุญุฉ ุงูุชุญูู</button>
            <button class="nav-tab" onclick="UI.showTab('add', event)">ุฅุถุงูุฉ ุฎุฑูู</button>
            <button class="nav-tab" onclick="UI.showTab('manage', event)">ุฅุฏุงุฑุฉ ุงูุฃุบูุงู</button>
            <button class="nav-tab" onclick="UI.showTab('pens', event)">ุงูุญุธุงุฆุฑ</button>
            <button class="nav-tab" onclick="UI.showTab('weights', event)">ุฅุฏุงุฑุฉ ุงูุฃูุฒุงู</button>
            <button class="nav-tab" onclick="UI.showTab('pregnancy', event)">ุงูุญูู ูุงูููุงุฏุฉ</button>
            <button class="nav-tab" onclick="UI.showTab('production', event)">ุงูุฏูุฑุฉ ุงูุฅูุชุงุฌูุฉ</button>
            <button class="nav-tab" onclick="UI.showTab('sheepCard', event)">ุจุทุงูุฉ ุงูุฎุฑูู</button>
            <button class="nav-tab" onclick="UI.showTab('events', event)">ุงูุฃุญุฏุงุซ</button>
            <button class="nav-tab" onclick="UI.showTab('finance', event)">ุงููุงููุฉ</button>
            <button class="nav-tab" onclick="UI.showTab('reports', event)">ุงูุชูุงุฑูุฑ</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalSheep">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงูุฃุบูุงู</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="aliveSheep">0</div>
                    <div class="stat-label">ุงูุฃุบูุงู ุงูุญูุฉ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="maleCount">0</div>
                    <div class="stat-label">ุงูุฐููุฑ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="femaleCount">0</div>
                    <div class="stat-label">ุงูุฅูุงุซ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="deadCount">0</div>
                    <div class="stat-label">ุงููุชูููุฉ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="soldCount">0</div>
                    <div class="stat-label">ุงููุจุงุนุฉ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="mothersCount">0</div>
                    <div class="stat-label">ุงูุฃููุงุช (ุฅูุงุซ ุจุงูุบุฉ)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="ramsCount">0</div>
                    <div class="stat-label">ุงููุญูู (ุฐููุฑ ุจุงูุบุฉ)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pregnantCount">0</div>
                    <div class="stat-label">ุญูุงูู ุญุงููุงู</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="upcomingBirths">0</div>
                    <div class="stat-label">ููุงุฏุงุช ูุชููุนุฉ (7 ุฃูุงู)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalPens">0</div>
                    <div class="stat-label">ุนุฏุฏ ุงูุญุธุงุฆุฑ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalDailyFeed">0 ูุฌู</div>
                    <div class="stat-label">ุงูุนูู ุงููููู ุงููุทููุจ</div>
                </div>
            </div>
        </div>

        <!-- Add Sheep Tab -->
        <div id="add" class="tab-content">
            <div id="alertContainer"></div>
            <form id="sheepForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="id">ุงููุนุฑู (ุฑูู ุงูุฎุฑูู)</label>
                        <input type="text" id="id" required>
                    </div>
                    <div class="form-group">
                        <label for="age">ุงูุนูุฑ (ูุญุณูุจ ุชููุงุฆูุงู)</label>
                        <input type="text" id="age" readonly placeholder="ุณูุชู ุญุณุงุจู ูู ุชุงุฑูุฎ ุงูููุงุฏุฉ">
                    </div>
                    <div class="form-group">
                        <label for="gender">ุงูุฌูุณ</label>
                        <select id="gender" required>
                            <option value="">ุงุฎุชุฑ ุงูุฌูุณ</option>
                            <option value="ุฐูุฑ">ุฐูุฑ</option>
                            <option value="ุฃูุซู">ุฃูุซู</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="mother">ุงูุฃู (ูุนุฑู ุงูุฃู)</label>
                        <select id="mother">
                            <option value="">ุงุฎุชุฑ ุงูุฃู (ุงุฎุชูุงุฑู)</option>
                        </select>
                        <div class="help-text">ุณูุชู ุชุญุฏูุซ ุนุฏุฏ ุงูููุงุฏุงุช ุชููุงุฆูุงู ููุฃู ุงููุฎุชุงุฑุฉ</div>
                    </div>
                    <div class="form-group">
                        <label for="weight">ุงููุฒู ุงูุงุจุชุฏุงุฆู (ูููู)</label>
                        <input type="number" id="weight" step="0.1" min="0">
                        <div class="help-text">ููููู ุฅุถุงูุฉ ุฃูุฒุงู ุฌุฏูุฏุฉ ูุงุญูุงู ูู ุชุจููุจ ุฅุฏุงุฑุฉ ุงูุฃูุฒุงู</div>
                    </div>
                    <div class="form-group">
                        <label for="birthDate">ุชุงุฑูุฎ ุงูููุงุฏุฉ</label>
                        <input type="date" id="birthDate" onchange="SheepManager.updateAgeField()">
                    </div>
                    <div class="form-group">
                        <label for="purchaseDate">ุชุงุฑูุฎ ุงูุดุฑุงุก</label>
                        <input type="date" id="purchaseDate">
                    </div>
                    <div class="form-group">
                        <label for="stage">ุงููุฑุญูุฉ</label>
                        <select id="stage">
                            <option value="">ุงุฎุชุฑ ุงููุฑุญูุฉ (ุชููุงุฆู ุญุณุจ ุงูุนูุฑ)</option>
                            <option value="ููููุฏ">ููููุฏ (ุฃูู ูู 90 ููู)</option>
                            <option value="ุทูู">ุทูู (ุฐูุฑ 3-8 ุดููุฑ)</option>
                            <option value="ุฑุฎู">ุฑุฎู (ุฃูุซู 3-8 ุดููุฑ)</option>
                            <option value="ุจุงูุบ">ุจุงูุบ (8-12 ุดูุฑ)</option>
                            <option value="ูุจูุฑ ุงูุณู">ูุจูุฑ ุงูุณู (ุฃูุซุฑ ูู ุณูุฉ)</option>
                        </select>
                        <div class="help-text">ุณูุชู ุชุญุฏูุฏ ุงููุฑุญูุฉ ุชููุงุฆูุงู ุจูุงุกู ุนูู ุงูุนูุฑ ูุงูุฌูุณ</div>
                    </div>
                    <div class="form-group">
                        <label for="birthCount">ุนุฏุฏ ุงูููุงุฏุงุช</label>
                        <input type="number" id="birthCount" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="pen">ุงูุดุจู (ุงูุญุธูุฑุฉ) *</label>
                        <select id="pen" required>
                            <option value="">ุงุฎุชุฑ ุงูุญุธูุฑุฉ</option>
                        </select>
                        <div class="help-text">ุงุฎุชุฑ ุงูุญุธูุฑุฉ ุงูุชู ุณููุถุน ูููุง ุงูุฎุฑูู</div>
                    </div>
                    <div class="form-group">
                        <label for="deathDate">ุชุงุฑูุฎ ุงูููุงุฉ</label>
                        <input type="date" id="deathDate" onchange="SheepManager.updateStatusBasedOnDates()">
                        <div class="help-text">ุนูุฏ ุฅุถุงูุฉ ุชุงุฑูุฎ ุงูููุงุฉ ุณูุชู ุชุบููุฑ ุงูุญุงูุฉ ุฅูู "ูุชููู" ุชููุงุฆูุงู</div>
                    </div>
                    <div class="form-group">
                        <label for="saleDate">ุชุงุฑูุฎ ุงูุจูุน</label>
                        <input type="date" id="saleDate" onchange="SheepManager.updateStatusBasedOnDates()">
                        <div class="help-text">ุนูุฏ ุฅุถุงูุฉ ุชุงุฑูุฎ ุงูุจูุน ุณูุชู ุชุบููุฑ ุงูุญุงูุฉ ุฅูู "ูุจุงุน" ุชููุงุฆูุงู</div>
                    </div>
                    <div class="form-group">
                        <label for="status">ุงูุชูุงุฌุฏ</label>
                        <select id="status" required>
                            <option value="ููุฌูุฏ">ููุฌูุฏ</option>
                            <option value="ูุชููู">ูุชููู</option>
                            <option value="ูุจุงุน">ูุจุงุน</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">ุฅุถุงูุฉ ุงูุฎุฑูู</button>
                    <button type="button" class="btn btn-warning" onclick="SheepManager.clearForm()">ูุณุญ ุงููููุฐุฌ</button>
                </div>
            </form>
        </div>

        <!-- Manage Sheep Tab -->
        <div id="manage" class="tab-content">
            <input type="text" class="search-box" id="searchInput"
                placeholder="ุงูุจุญุซ ุจุงููุนุฑูุ ุงูุฌูุณุ ุงููุฑุญูุฉุ ุฃู ุงูุชูุงุฌุฏ...">

            <div class="table-container">
                <table class="data-table" id="sheepTable">
                    <thead>
                        <tr>
                            <th>ุงููุนุฑู</th>
                            <th>ุงูุนูุฑ</th>
                            <th>ุงูุฌูุณ</th>
                            <th>ุงูุฃู</th>
                            <th>ุงููุฒู ุงูุญุงูู</th>
                            <th>ุชุงุฑูุฎ ุงูููุงุฏุฉ</th>
                            <th>ุชุงุฑูุฎ ุงูุดุฑุงุก</th>
                            <th>ุงููุฑุญูุฉ</th>
                            <th>ุนุฏุฏ ุงูููุงุฏุงุช</th>
                            <th>ุงูุดุจู</th>
                            <th>ุชุงุฑูุฎ ุงูููุงุฉ</th>
                            <th>ุชุงุฑูุฎ ุงูุจูุน</th>
                            <th>ุงูุชูุงุฌุฏ</th>
                            <th>ุงูุนูููุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="sheepTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pens Tab -->
        <div id="pens" class="tab-content">
            <h2>ุฅุฏุงุฑุฉ ุงูุญุธุงุฆุฑ</h2>
            <p>ุฅุฏุงุฑุฉ ุงูุญุธุงุฆุฑ ูุชูุฒูุน ุงูุฃุบูุงู ูุญุณุงุจ ุงุญุชูุงุฌุงุช ุงูุนูู</p>
            
            <!-- ุฃุฒุฑุงุฑ ูุฅุนุฏุงุฏุงุช -->
            <div style="margin-bottom: 20px;">
                <button class="btn btn-success" onclick="PensManager.openModal()">+ ุฅุถุงูุฉ ุญุธูุฑุฉ</button>
                <button class="btn btn-info" onclick="PensManager.openFeedSettingsModal()">โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุนูู</button>
            </div>
            
            <!-- ูุงุฆูุฉ ุงูุญุธุงุฆุฑ -->
            <div class="pen-grid" id="pensGrid">
                <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
            </div>
        </div>

        <!-- Weights Management Tab -->
        <div id="weights" class="tab-content">
            <h2>ุฅุฏุงุฑุฉ ุฃูุฒุงู ุงูุฃุบูุงู</h2>
            <p>ุงุฎุชุฑ ุฎุฑููุงู ูุฅุถุงูุฉ ูุฒู ุฌุฏูุฏ ุฃู ุนุฑุถ ุชุงุฑูุฎ ุงูุฃูุฒุงู</p>
            
            <input type="text" class="search-box" id="weightSearchInput"
                placeholder="ุงูุจุญุซ ุนู ุฎุฑูู ุจุงููุนุฑู...">

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ุงููุนุฑู</th>
                            <th>ุงูุฌูุณ</th>
                            <th>ุงููุฒู ุงูุญุงูู</th>
                            <th>ุขุฎุฑ ูุฒู ูุณุฌู</th>
                            <th>ุนุฏุฏ ุงูุฃูุฒุงู ุงููุณุฌูุฉ</th>
                            <th>ุงูุนูููุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="weightsTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pregnancy and Birth Tab -->
        <div id="pregnancy" class="tab-content">
            <h2>ุชุณุฌูู ุงูุญูู ูุงูููุงุฏุฉ</h2>
            <p>ุณุฌู ููุชุงุจุนุฉ ุญุงูุงุช ุงูุญูู ูุงูููุงุฏุฉ ููุฅูุงุซ</p>
            
            <div style="margin-bottom: 20px;">
                <button class="btn btn-success" onclick="PregnancyManager.openModal()">+ ุชุณุฌูู ุญูู ุฌุฏูุฏ</button>
                <select class="search-box" id="pregnancyStatusFilter" onchange="PregnancyManager.filterPregnancies()" style="width: 200px; margin-right: 10px;">
                    <option value="">ุฌููุน ุงูุญุงูุงุช</option>
                    <option value="ุญุงูู">ุญุงูู ุญุงููุงู</option>
                    <option value="ููุฏุช">ููุฏุช</option>
                    <option value="ูุชููุน">ููุงุฏุฉ ูุชููุนุฉ ูุฑูุจุงู</option>
                </select>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ูุนุฑู ุงูุฃูุซู</th>
                            <th>ุชุงุฑูุฎ ุงูุญูู</th>
                            <th>ุชุงุฑูุฎ ุงูููุงุฏุฉ ุงููุชููุน</th>
                            <th>ุชุงุฑูุฎ ุงูููุงุฏุฉ ุงููุนูู</th>
                            <th>ุนุฏุฏ ุงูููุงููุฏ</th>
                            <th>ุงูุญุงูุฉ</th>
                            <th>ุงูุฃูุงู ุงููุชุจููุฉ/ุงููููุถูุฉ</th>
                            <th>ุงูุนูููุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="pregnancyTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Production Cycle Tab -->
        <div id="production" class="tab-content">
            <h2>ุชุญููู ุงูุฏูุฑุฉ ุงูุฅูุชุงุฌูุฉ ููุฅูุงุซ</h2>
            <p>ูุชุงุจุนุฉ ุงูุฃุฏุงุก ุงูุฅูุชุงุฌู ูุงูุฏูุฑุงุช ุงูุฅูุฌุงุจูุฉ ููุฅูุงุซ</p>
            
            <div class="stats-grid" style="margin-bottom: 30px;">
                <div class="stat-card">
                    <div class="stat-number" id="avgProductionCycle">0</div>
                    <div class="stat-label">ูุชูุณุท ุงูุฏูุฑุฉ ุงูุฅูุชุงุฌูุฉ (ููู)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgBirthsPerYear">0</div>
                    <div class="stat-label">ูุชูุณุท ุงูููุงููุฏ/ุงูุณูุฉ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="readyForMating">0</div>
                    <div class="stat-label">ุฌุงูุฒุฉ ููุชุฒุงูุฌ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="productiveFemales">0</div>
                    <div class="stat-label">ุฅูุงุซ ููุชุฌุฉ</div>
                </div>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ูุนุฑู ุงูุฃูุซู</th>
                            <th>ุงูุนูุฑ</th>
                            <th>ุขุฎุฑ ุญูู</th>
                            <th>ุขุฎุฑ ููุงุฏุฉ</th>
                            <th>ุฃูุงู ูู ุขุฎุฑ ููุงุฏุฉ</th>
                            <th>ุงูุญุงูุฉ ุงูุฅูุชุงุฌูุฉ</th>
                            <th>ุนุฏุฏ ุงูุฏูุฑุงุช</th>
                            <th>ูุชูุณุท ุงูุฏูุฑุฉ (ููู)</th>
                            <th>ุงูููุงููุฏ/ุงูุณูุฉ</th>
                            <th>ุฅุฌูุงูู ุงูููุงููุฏ</th>
                            <th>ุงูุนูููุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="productionTableBody">
                    </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                <h4>ููุงุญุธุงุช:</h4>
                <ul style="margin: 0; padding-right: 20px;">
                    <li>ุงูุฏูุฑุฉ ุงูุฅูุชุงุฌูุฉ = ุงููุชุฑุฉ ูู ุงูููุงุฏุฉ ุญุชู ุงูููุงุฏุฉ ุงูุชุงููุฉ</li>
                    <li>ุงูุฃูุซู ุฌุงูุฒุฉ ููุชุฒุงูุฌ ุจุนุฏ 45-60 ููู ูู ุงูููุงุฏุฉ</li>
                    <li>ูุชุฑุฉ ุงูุญูู ุงููุชููุนุฉ: 149 ููู</li>
                    <li>ุงูุฏูุฑุฉ ุงููุซุงููุฉ: 200-220 ููู (ููุงุฏุชูู ูู ุงูุณูุฉ)</li>
                </ul>
            </div>
        </div>

        <!-- 2. ุฃุถู ูุญุชูู ุงูุตูุญุฉ ุงูุฌุฏูุฏุฉ ุจุนุฏ tab "production" -->
<div id="sheepCard" class="tab-content">
    <h2>ุจุทุงูุฉ ุงูุฎุฑูู</h2>
    <p>ุงุจุญุซ ุนู ุฎุฑูู ูุนุฑุถ ุฌููุน ูุนูููุงุชู ูุชุงุฑูุฎู ุงููุงูู</p>
    
    <!-- ูุณู ุงูุจุญุซ -->
    <div style="margin-bottom: 30px;">
        <div class="form-group" style="max-width: 500px; margin: 0 auto;">
            <label for="sheepCardSearch">ุงูุจุญุซ ุนู ุงูุฎุฑูู</label>
            <div style="display: flex; gap: 10px;">
                <select id="sheepCardSearch" class="form-control" style="flex: 1;">
                    <option value="">ุงุฎุชุฑ ุงูุฎุฑูู...</option>
                </select>
                <button class="btn btn-primary" onclick="SheepCard.loadSheepDetails()">ุนุฑุถ ุงูุจุทุงูุฉ</button>
            </div>
        </div>
    </div>
    
    <!-- ูุญุชูู ุงูุจุทุงูุฉ -->
    <div id="sheepCardContent" style="display: none;">
        <!-- ุณูุชู ููุคู ุฏููุงููููุงู -->
    </div>
</div>

        <!-- Events Tab -->
        <div id="events" class="tab-content">
            <h2>ุฅุฏุงุฑุฉ ุงูุฃุญุฏุงุซ</h2>
            <p>ุณุฌู ูุชุชุจุน ุฌููุน ุงูุฃุญุฏุงุซ ุงููุชุนููุฉ ุจุงูุฃุบูุงู (ูุต ุงูุตููุ ุงูุนูุงุฌุ ุงูุชุทุนููุงุชุ ูุบูุฑูุง)</p>
            
            <div style="margin-bottom: 20px;">
                <input type="text" class="search-box" id="eventSearchInput"
                    placeholder="ุงูุจุญุซ ุนู ุฎุฑูู ุจุงููุนุฑู..." style="width: 48%; margin-left: 2%;">
                <select class="search-box" id="eventTypeFilter" onchange="EventsManager.filterEvents()" style="width: 48%;">
                    <option value="">ุฌููุน ุฃููุงุน ุงูุฃุญุฏุงุซ</option>
                    <option value="ูุต ุตูู">ูุต ุตูู</option>
                    <option value="ุนูุงุฌ">ุนูุงุฌ</option>
                    <option value="ุชุทุนูู">ุชุทุนูู</option>
                    <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                </select>
            </div>
        
            <!-- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ -->
            <div class="stats-grid" style="margin-bottom: 30px;">
                <div class="stat-card">
                    <div class="stat-number" id="totalEventsCount">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงูุฃุญุฏุงุซ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayEventsCount">0</div>
                    <div class="stat-label">ุฃุญุฏุงุซ ุงูููู</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="upcomingEventsCount">0</div>
                    <div class="stat-label">ุฃุญุฏุงุซ ูุงุฏูุฉ (7 ุฃูุงู)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="overdueEventsCount">0</div>
                    <div class="stat-label">ุฃุญุฏุงุซ ูุชุฃุฎุฑุฉ</div>
                </div>
            </div>
        
            <!-- ุงูุฃุญุฏุงุซ ุงููุงุฏูุฉ -->
            <div style="margin-bottom: 40px;">
                <h3 style="color: #e74c3c;">๐ ุงูุฃุญุฏุงุซ ุงููุงุฏูุฉ ูุงููุชุฃุฎุฑุฉ</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงููุนุฑู</th>
                                <th>ููุน ุงูุญุฏุซ</th>
                                <th>ุชุงุฑูุฎ ุงูุญุฏุซ</th>
                                <th>ุงูุฃูุงู ุงููุชุจููุฉ</th>
                                <th>ุงูููุงุญุธุงุช</th>
                                <th>ุงูุนูููุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="upcomingEventsTableBody">
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 20px; color: #6c757d;">
                                    ูุง ุชูุฌุฏ ุฃุญุฏุงุซ ูุงุฏูุฉ ูุฌุฏููุฉ
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        
            <!-- ุงูุฃุญุฏุงุซ ุงูุณุงุจูุฉ -->
            <div style="margin-bottom: 40px;">
                <h3 style="color: #27ae60;">โ ุงูุฃุญุฏุงุซ ุงูุณุงุจูุฉ</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงููุนุฑู</th>
                                <th>ููุน ุงูุญุฏุซ</th>
                                <th>ุชุงุฑูุฎ ุงูุญุฏุซ</th>
                                <th>ููุฐ (ุฃูุงู)</th>
                                <th>ุงูููุงุญุธุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="pastEventsTableBody">
                            <tr>
                                <td colspan="5" style="text-align: center; padding: 20px; color: #6c757d;">
                                    ูุง ุชูุฌุฏ ุฃุญุฏุงุซ ุณุงุจูุฉ
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        
            <!-- ุฌุฏูู ุฅุฏุงุฑุฉ ุงูุฃุญุฏุงุซ ููู ุฎุฑูู -->
            <div>
                <h3>ุฅุฏุงุฑุฉ ุฃุญุฏุงุซ ุงูุฃุบูุงู</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงููุนุฑู</th>
                                <th>ุงูุฌูุณ</th>
                                <th>ุนุฏุฏ ุงูุฃุญุฏุงุซ</th>
                                <th>ุขุฎุฑ ุญุฏุซ</th>
                                <th>ุชุงุฑูุฎ ุขุฎุฑ ุญุฏุซ</th>
                                <th>ุงูุนูููุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="eventsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ุฅุถุงูุฉ ูุงูุฐุฉ ุฌุฏููุฉ ุญุฏุซ ุฌุฏูุฏ -->
        <div id="scheduleEventModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="scheduleEventModalTitle">ุฌุฏููุฉ ุญุฏุซ ูุงุฏู</h2>
                    <button class="close" onclick="EventsManager.closeScheduleModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="scheduleEventForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="scheduleSheepId">ุงูุฎุฑูู</label>
                                <select id="scheduleSheepId" required>
                                    <option value="">ุงุฎุชุฑ ุงูุฎุฑูู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleEventType">ููุน ุงูุญุฏุซ</label>
                                <select id="scheduleEventType" required>
                                    <option value="">ุงุฎุชุฑ ููุน ุงูุญุฏุซ</option>
                                    <option value="ูุต ุตูู">ูุต ุตูู</option>
                                    <option value="ุนูุงุฌ">ุนูุงุฌ</option>
                                    <option value="ุชุทุนูู">ุชุทุนูู</option>
                                    <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleEventDate">ุชุงุฑูุฎ ุงูุญุฏุซ ุงููุฎุทุท</label>
                                <input type="date" id="scheduleEventDate" required min="${new Date().toISOString().split('T')[0]}">
                            </div>
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label for="scheduleEventNotes">ููุงุญุธุงุช</label>
                                <textarea id="scheduleEventNotes" rows="3" placeholder="ููุงุญุธุงุช ุงุฎุชูุงุฑูุฉ..."></textarea>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">ุญูุธ</button>
                            <button type="button" class="btn btn-warning" onclick="EventsManager.closeScheduleModal()">ุฅูุบุงุก</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        

        <!-- Finance Tab -->
        <div id="finance" class="tab-content">
            <h2>ุฅุฏุงุฑุฉ ุงููุนุงููุงุช ุงููุงููุฉ</h2>
            <p>ุณุฌู ูุชุชุจุน ุฌููุน ุงููุตุฑููุงุช ูุงููุฏุฎููุงุช ุงููุชุนููุฉ ุจุงููุฒุฑุนุฉ</p>
            
            <!-- ููุฎุต ูุงูู -->
            <div class="stats-grid" style="margin-bottom: 30px;">
                <div class="stat-card">
                    <div class="stat-number" id="totalIncome" style="color: var(--success-color);">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงููุฏุฎููุงุช</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalExpense" style="color: var(--danger-color);">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงููุตุฑููุงุช</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="netBalance">0</div>
                    <div class="stat-label">ุงูุฑุตูุฏ ุงูุตุงูู</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="transactionCount">0</div>
                    <div class="stat-label">ุนุฏุฏ ุงููุนุงููุงุช</div>
                </div>
            </div>
            
            <!-- ุฃุฒุฑุงุฑ ูููุงุชุฑ -->
            <div style="margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn btn-success" onclick="FinanceManager.openModal('income')">+ ุฅุถุงูุฉ ูุฏุฎูู</button>
                <button class="btn btn-danger" onclick="FinanceManager.openModal('expense')">- ุฅุถุงูุฉ ูุตุฑูู</button>
                
                <select class="search-box" id="financeTypeFilter" onchange="FinanceManager.filterTransactions()" style="width: 150px;">
                    <option value="">ุฌููุน ุงูุฃููุงุน</option>
                    <option value="income">ูุฏุฎููุงุช</option>
                    <option value="expense">ูุตุฑููุงุช</option>
                </select>
                
                <select class="search-box" id="financeCategoryFilter" onchange="FinanceManager.filterTransactions()" style="width: 200px;">
                    <option value="">ุฌููุน ุงููุฆุงุช</option>
                </select>
                
                <input type="date" class="search-box" id="financeFromDate" onchange="FinanceManager.filterTransactions()" style="width: 150px;">
                <input type="date" class="search-box" id="financeToDate" onchange="FinanceManager.filterTransactions()" style="width: 150px;">
            </div>
            
            <!-- ุฌุฏูู ุงููุนุงููุงุช -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูููุน</th>
                            <th>ุงููุฆุฉ</th>
                            <th>ุงููุจูุบ</th>
                            <th>ุงููุตู</th>
                            <th>ุงูุฎุฑูู ุงููุฑุชุจุท</th>
                            <th>ุงูุนูููุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="financeTableBody">
                    </tbody>
                </table>
            </div>
            
            <!-- ููุฎุต ุญุณุจ ุงููุฆุงุช -->
            <div style="margin-top: 30px;">
                <h3>ููุฎุต ุญุณุจ ุงููุฆุงุช</h3>
                <div id="categorySummary" class="stats-grid">
                    <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="avgAge">0</div>
                    <div class="stat-label">ูุชูุณุท ุงูุนูุฑ (ููู)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgWeight">0</div>
                    <div class="stat-label">ูุชูุณุท ุงููุฒู ุงูุญุงูู (ูููู)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalBirths">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงูููุงุฏุงุช</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="mothersCountReport">0</div>
                    <div class="stat-label">ุนุฏุฏ ุงูุฃููุงุช</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalWeightRecords">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุณุฌูุงุช ุงููุฒู</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalEvents">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงูุฃุญุฏุงุซ</div>
                </div>
            </div>

            <div class="report-actions">
                <button class="btn btn-primary" onclick="Reports.exportData()">ุชุตุฏูุฑ ุงูุจูุงูุงุช (JSON)</button>
                <button class="btn btn-info" onclick="Reports.updateStagesManually()">ุชุญุฏูุซ ุงููุฑุงุญู ุงูุขู</button>
                <button class="btn btn-warning" onclick="Reports.clearAllData()">ูุณุญ ุฌููุน ุงูุจูุงูุงุช</button>
                <button class="btn btn-success" onclick="Reports.addSampleData()">ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ</button>
            </div>
        </div>
    </div>

    <!-- Weight Modal -->
    <div id="weightModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">ุฅุฏุงุฑุฉ ูุฒู ุงูุฎุฑูู</h2>
                <button class="close" onclick="WeightManager.closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="weightModalContent">
                    <!-- ุณูุชู ููุก ุงููุญุชูู ุฏููุงููููุงู -->
                </div>
            </div>
        </div>
    </div>

    <!-- Events Modal -->
    <div id="eventsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="eventsModalTitle">ุฅุฏุงุฑุฉ ุฃุญุฏุงุซ ุงูุฎุฑูู</h2>
                <button class="close" onclick="EventsManager.closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="eventsModalContent">
                    <!-- ุณูุชู ููุก ุงููุญุชูู ุฏููุงููููุงู -->
                </div>
            </div>
        </div>
    </div>

    <!-- Pregnancy Modal -->
    <div id="pregnancyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="pregnancyModalTitle">ุชุณุฌูู ุญูู ุฌุฏูุฏ</h2>
                <button class="close" onclick="PregnancyManager.closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="pregnancyModalContent">
                    <form id="pregnancyForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="pregnantSheepId">ุงูุฃูุซู ุงูุญุงูู</label>
                                <select id="pregnantSheepId" required onchange="PregnancyManager.updateInfo()">
                                    <option value="">ุงุฎุชุฑ ุงูุฃูุซู</option>
                                </select>
                                <div class="help-text">ูุชู ุนุฑุถ ุงูุฅูุงุซ ุงูุจุงูุบุฉ ููุท</div>
                            </div>
                            <div class="form-group">
                                <label for="pregnancyDate">ุชุงุฑูุฎ ุงูุญูู</label>
                                <input type="date" id="pregnancyDate" required onchange="PregnancyManager.calculateExpectedBirthDate()">
                            </div>
                            <div class="form-group">
                                <label for="expectedBirthDate">ุชุงุฑูุฎ ุงูููุงุฏุฉ ุงููุชููุน</label>
                                <input type="date" id="expectedBirthDate" readonly>
                                <div class="help-text">ูุญุณุจ ุชููุงุฆูุงู (149 ููู ูู ุชุงุฑูุฎ ุงูุญูู)</div>
                            </div>
                            <div class="form-group">
                                <label for="actualBirthDate">ุชุงุฑูุฎ ุงูููุงุฏุฉ ุงููุนูู</label>
                                <input type="date" id="actualBirthDate" onchange="PregnancyManager.toggleBirthFields()">
                                <div class="help-text">ุงุชุฑูู ูุงุฑุบุงู ุฅุฐุง ูู ุชุชู ุงูููุงุฏุฉ ุจุนุฏ</div>
                            </div>
                            <div class="form-group" id="birthCountGroup" style="display: none;">
                                <label for="birthCountPregnancy">ุนุฏุฏ ุงูููุงููุฏ</label>
                                <input type="number" id="birthCountPregnancy" min="1" max="5" value="1">
                            </div>
                            <div class="form-group">
                                <label for="pregnancyNotes">ููุงุญุธุงุช</label>
                                <textarea id="pregnancyNotes" rows="3" placeholder="ููุงุญุธุงุช ุงุฎุชูุงุฑูุฉ..."></textarea>
                            </div>
                        </div>
                        
                        <div id="sheepInfoDiv" style="display: none; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <h4>ูุนูููุงุช ุงูุฃูุซู</h4>
                            <p id="sheepInfoText"></p>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">ุญูุธ</button>
                            <button type="button" class="btn btn-warning" onclick="PregnancyManager.closeModal()">ุฅูุบุงุก</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Pen Modal -->
    <div id="penModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="penModalTitle">ุฅุถุงูุฉ ุญุธูุฑุฉ ุฌุฏูุฏุฉ</h2>
                <button class="close" onclick="PensManager.closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="penForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="penId">ูุนุฑู ุงูุญุธูุฑุฉ</label>
                            <input type="text" id="penId" required placeholder="ูุซุงู: A1, B2">
                        </div>
                        <div class="form-group">
                            <label for="penName">ุงุณู ุงูุญุธูุฑุฉ</label>
                            <input type="text" id="penName" required placeholder="ูุซุงู: ุญุธูุฑุฉ ุงููุญูู">
                        </div>
                        <div class="form-group">
                            <label for="penCapacity">ุงูุณุนุฉ ุงููุตูู</label>
                            <input type="number" id="penCapacity" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="penMeals">ุนุฏุฏ ุงููุฌุจุงุช ุงูููููุฉ</label>
                            <input type="number" id="penMeals" min="1" max="5" value="2" required>
                        </div>
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label for="penNotes">ููุงุญุธุงุช</label>
                            <textarea id="penNotes" rows="3" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ..."></textarea>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">ุญูุธ</button>
                        <button type="button" class="btn btn-warning" onclick="PensManager.closeModal()">ุฅูุบุงุก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Pen Details Modal -->
    <div id="penDetailsModal" class="modal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h2 id="penDetailsTitle">ุชูุงุตูู ุงูุญุธูุฑุฉ</h2>
                <button class="close" onclick="PensManager.closePenDetailsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="penDetailsContent">
                    <!-- ุณูุชู ููุคู ุฏููุงููููุงู -->
                </div>
            </div>
        </div>
    </div>

    <!-- Feed Settings Modal -->
    <div id="feedSettingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุฅุนุฏุงุฏุงุช ุงูุนูู ุญุณุจ ุงููุฑุญูุฉ</h2>
                <button class="close" onclick="PensManager.closeFeedSettingsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>ุญุฏุฏ ูููุฉ ุงูุนูู ุงูููููุฉ ุจุงูููููุฌุฑุงู ููู ูุฑุญูุฉ:</p>
                <form id="feedSettingsForm">
                    <div id="feedSettingsContent">
                        <!-- ุณูุชู ููุคู ุฏููุงููููุงู -->
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                        <button type="button" class="btn btn-warning" onclick="PensManager.closeFeedSettingsModal()">ุฅูุบุงุก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Feed Types Modal -->
    <div id="feedTypesModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2 id="feedTypesModalTitle">ุฅุฏุงุฑุฉ ุฃููุงุน ุงูุนูู</h2>
                <button class="close" onclick="PensManager.closeFeedTypesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="feedTypesModalContent">
                    <!-- ุณูุชู ููุคู ุฏููุงููููุงู -->
                </div>
            </div>
        </div>
    </div>

    <!-- Finance Modal -->
    <div id="financeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="financeModalTitle">ุฅุถุงูุฉ ูุนุงููุฉ ูุงููุฉ</h2>
                <button class="close" onclick="FinanceManager.closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="financeForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="transactionType">ููุน ุงููุนุงููุฉ</label>
                            <select id="transactionType" required onchange="FinanceManager.updateCategories()">
                                <option value="">ุงุฎุชุฑ ุงูููุน</option>
                                <option value="income">ูุฏุฎูู</option>
                                <option value="expense">ูุตุฑูู</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transactionCategory">ุงููุฆุฉ</label>
                            <select id="transactionCategory" required>
                                <option value="">ุงุฎุชุฑ ุงููุฆุฉ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transactionAmount">ุงููุจูุบ</label>
                            <input type="number" id="transactionAmount" step="0.01" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="transactionDate">ุงูุชุงุฑูุฎ</label>
                            <input type="date" id="transactionDate" required>
                        </div>
                        <div class="form-group">
                            <label for="transactionSheep">ุงูุฎุฑูู ุงููุฑุชุจุท (ุงุฎุชูุงุฑู)</label>
                            <select id="transactionSheep">
                                <option value="">ุจุฏูู ุฑุจุท</option>
                            </select>
                        </div>
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label for="transactionDescription">ุงููุตู</label>
                            <textarea id="transactionDescription" rows="3" placeholder="ูุตู ุงููุนุงููุฉ..."></textarea>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">ุญูุธ</button>
                        <button type="button" class="btn btn-warning" onclick="FinanceManager.closeModal()">ุฅูุบุงุก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Batch Pen Modal -->
    <div id="batchPenModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ููู ูุฌููุนุฉ ุฃุบูุงู ุฅูู ุญุธูุฑุฉ</h2>
                <button class="close" onclick="BatchPenManager.closeBatchPenModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="batchPenModalContent">
                    <!-- ุณูุชู ููุคู ุฏููุงููููุงู -->
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Transfer Modal -->
    <div id="quickTransferModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>ููู ุงูุฃุบูุงู ุจูู ุงูุญุธุงุฆุฑ</h2>
                <button class="close" onclick="QuickPenTransfer.closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="quickTransferContent">
                    <!-- ุณูุชู ููุคู ุฏููุงููููุงู -->
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-message">
            <div class="loading"></div>
            <p>ุฌุงุฑู ุงูุชุญููู...</p>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="js/auth.js"></script>
    <script src="js/config.js"></script>
    <script src="js/cache.js"></script>
    <script src="js/api.js"></script>
    <script src="js/api-optimized.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/sheep.js"></script>
    <script src="js/pens.js"></script>
    <script src="js/weights.js"></script>
    <script src="js/events.js"></script>
    <script src="js/pregnancy.js"></script>
    <script src="js/production.js"></script>
    <script src="js/finance.js"></script>
    <script src="js/reports.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/ui-optimized.js"></script>
    <script src="js/app.js"></script>
    <script src="js/sheepCard.js"></script>
</body>

</html>